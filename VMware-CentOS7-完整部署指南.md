# ğŸš€ æµ·éš†å’¨è¯¢å®˜ç½‘ - VMware CentOS 7 å®Œæ•´éƒ¨ç½²æŒ‡å—

> ä¸“ä¸ºVMwareè™šæ‹Ÿæœºç¯å¢ƒè®¾è®¡ï¼Œæ— éœ€åŸŸåï¼Œå¯å¿«é€Ÿè¿ç§»åˆ°äº‘æœåŠ¡å™¨

## ğŸ“‹ ç›®å½•

1. [ç¯å¢ƒè¯´æ˜](#ç¯å¢ƒè¯´æ˜)
2. [å‡†å¤‡å·¥ä½œ](#å‡†å¤‡å·¥ä½œ)
3. [å¿«é€Ÿéƒ¨ç½²ï¼ˆæ¨èï¼‰](#å¿«é€Ÿéƒ¨ç½²æ¨è)
4. [æ‰‹åŠ¨éƒ¨ç½²ï¼ˆè¯¦ç»†æ­¥éª¤ï¼‰](#æ‰‹åŠ¨éƒ¨ç½²è¯¦ç»†æ­¥éª¤)
5. [è®¿é—®ç³»ç»Ÿ](#è®¿é—®ç³»ç»Ÿ)
6. [è¿ç§»åˆ°äº‘æœåŠ¡å™¨](#è¿ç§»åˆ°äº‘æœåŠ¡å™¨)
7. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ç¯å¢ƒè¯´æ˜

### å½“å‰ç¯å¢ƒ
- **è™šæ‹ŸåŒ–å¹³å°**: VMware Workstation/Player
- **æ“ä½œç³»ç»Ÿ**: CentOS 7 64ä½ï¼ˆå…¨æ–°å®‰è£…ï¼‰
- **ç½‘ç»œ**: æ— åŸŸåï¼Œä½¿ç”¨IPåœ°å€è®¿é—®
- **ç”¨é€”**: æœ¬åœ°æµ‹è¯•å’Œå¼€å‘

### ç³»ç»Ÿè¦æ±‚
- **å†…å­˜**: è‡³å°‘ 4GBï¼ˆæ¨è 8GBï¼‰
- **ç¡¬ç›˜**: è‡³å°‘ 20GB å¯ç”¨ç©ºé—´
- **CPU**: 2æ ¸å¿ƒä»¥ä¸Š
- **ç½‘ç»œ**: å¯è®¿é—®äº’è”ç½‘ï¼ˆç”¨äºä¸‹è½½è½¯ä»¶åŒ…ï¼‰

---

## å‡†å¤‡å·¥ä½œ



#### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ SSH å·¥å…·ï¼ˆæœ€æ¨èï¼Œæœ€ç®€å•ï¼‰

æ—¢ç„¶ä½ å·²ç»æœ‰äº†è™šæ‹Ÿæœºçš„ IPï¼ˆ`192.168.108.128`ï¼‰ï¼Œ**ä¸è¦ç›´æ¥åœ¨è™šæ‹Ÿæœºçš„é»‘çª—å£é‡Œæ‰“å­—**ã€‚

1. åœ¨ Windows ä¸Šæ‰“å¼€ **CMD** æˆ– **PowerShell**ã€‚

2. è¾“å…¥å‘½ä»¤è¿æ¥è™šæ‹Ÿæœºï¼š

   Bash

   ```
   ssh root@192.168.108.128
   ```

3. **è¿æ¥æˆåŠŸåï¼š**

   - **ç²˜è´´**ï¼šåœ¨çª—å£ä¸­ç‚¹å‡» **é¼ æ ‡å³é”®**ï¼Œæˆ–è€…æŒ‰ **`Shift + Insert`**ã€‚
   - **å¤åˆ¶**ï¼šç”¨é¼ æ ‡å·¦é”®é€‰ä¸­æ–‡å­—ï¼Œé€šå¸¸å°±è‡ªåŠ¨å¤åˆ¶äº†ã€‚



### 1. è·å–è™šæ‹ŸæœºIPåœ°å€

åœ¨CentOSè™šæ‹Ÿæœºä¸­æ‰§è¡Œï¼š

```bash
ip addr show
```

æ‰¾åˆ°ç±»ä¼¼ `192.168.x.x` çš„IPåœ°å€ï¼Œè®°å½•ä¸‹æ¥ã€‚ä¾‹å¦‚ï¼š`192.168.108.128`

### 2. ç¡®ä¿ç½‘ç»œè¿é€š

åœ¨Windowsä¸»æœºä¸Šæµ‹è¯•ï¼š

```cmd
ping 192.168.108.128
```

å¦‚æœèƒ½pingé€šï¼Œè¯´æ˜ç½‘ç»œæ­£å¸¸ã€‚

### 3. è·å–é¡¹ç›®æ–‡ä»¶

**æ–¹å¼ä¸€ï¼šä½¿ç”¨Gitå…‹éš†ï¼ˆæœ€æ¨èï¼‰**

å¦‚æœé¡¹ç›®ä»£ç åœ¨Gitä»“åº“ä¸­ï¼Œè¿™æ˜¯æœ€ç®€å•å’Œæœ€æ¨èçš„æ–¹å¼ï¼š

```bash
# å®‰è£…Gitï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
yum install -y git

# å…‹éš†é¡¹ç›®åˆ°æŒ‡å®šç›®å½•
mkdir -p /opt/hailong
cd /opt/hailong
git clone https://github.com/BobVaughan6/EnterprisePortal.git project

# è¿›å…¥é¡¹ç›®ç›®å½•
cd project
```

**ä¼˜ç‚¹**ï¼š
- âœ… æœ€ç®€å•å¿«æ·
- âœ… ä¾¿äºåç»­æ›´æ–°ä»£ç ï¼ˆ`git pull`ï¼‰
- âœ… ä¿ç•™ç‰ˆæœ¬å†å²
- âœ… æ”¯æŒå¤šäººåä½œ

**æ–¹å¼äºŒï¼šä½¿ç”¨WinSCPä¸Šä¼ **

é€‚åˆä¸ç†Ÿæ‚‰Gitæˆ–é¡¹ç›®ä¸åœ¨ä»“åº“ä¸­çš„æƒ…å†µï¼š

1. ä¸‹è½½WinSCP: https://winscp.net/
2. è¿æ¥ä¿¡æ¯ï¼š
   - ä¸»æœºåï¼šä½ çš„è™šæ‹ŸæœºIPï¼ˆå¦‚ 192.168.108.128ï¼‰
   - ç”¨æˆ·åï¼šroot
   - å¯†ç ï¼šroot
3. åœ¨è™šæ‹Ÿæœºä¸Šåˆ›å»ºç›®å½•ï¼š
   ```bash
   mkdir -p /opt/hailong/project
   ```
4. å°†æ•´ä¸ª `Protral` é¡¹ç›®æ–‡ä»¶å¤¹ä¸Šä¼ åˆ° `/opt/hailong/project`

**æ–¹å¼ä¸‰ï¼šä½¿ç”¨VMwareå…±äº«æ–‡ä»¶å¤¹**

é€‚åˆé¢‘ç¹ä¿®æ”¹ä»£ç çš„å¼€å‘åœºæ™¯ï¼š

```bash
# å®‰è£…VMware Tools
yum install -y open-vm-tools

# åˆ›å»ºæŒ‚è½½ç‚¹
mkdir -p /mnt/hgfs

# æŒ‚è½½å…±äº«æ–‡ä»¶å¤¹
vmhgfs-fuse .host:/ /mnt/hgfs -o allow_other

# å¤åˆ¶é¡¹ç›®æ–‡ä»¶
mkdir -p /opt/hailong/project
cp -r /mnt/hgfs/Protral/* /opt/hailong/project/
```

---

## å¿«é€Ÿéƒ¨ç½²ï¼ˆæ¨èï¼‰

### ä½¿ç”¨ä¸€é”®éƒ¨ç½²è„šæœ¬

è¿™æ˜¯æœ€ç®€å•çš„æ–¹å¼ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆæ‰€æœ‰å®‰è£…å’Œé…ç½®ã€‚

#### ç¬¬1æ­¥ï¼šä¸Šä¼ éƒ¨ç½²è„šæœ¬

å°†é¡¹ç›®ä¸­çš„ `deploy-centos7.sh` æ–‡ä»¶ä¸Šä¼ åˆ°è™šæ‹Ÿæœºçš„ `/root/` ç›®å½•ã€‚

##### 1. è¿›å…¥ç›®æ ‡ç›®å½•
```bash
mkdir -p /opt/hailong
cd /opt/hailong
```

##### 2. å…‹éš†ä»“åº“ï¼ˆæ³¨æ„ï¼šæ­¤æ—¶è™šæ‹Ÿæœºå¿…é¡»èƒ½ä¸Šå¤–ç½‘ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼‰
```bash
git clone https://github.com/BobVaughan6/EnterprisePortal.git project
```

##### 3. è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹æ‰¾åˆ°è„šæœ¬
```bash
cd /opt/hailong/project
```

##### 4. å°†è„šæœ¬å¤åˆ¶åˆ° /root ç›®å½•ï¼ˆå¯¹åº”ä½ æ–‡æ¡£ä¸­çš„ç¬¬ä¸€æ­¥ï¼‰
```bash
cp deploy-centos7.sh /root/
```



#### ç¬¬2æ­¥ï¼šèµ‹äºˆæ‰§è¡Œæƒé™

```bash
cd /root
chmod +x deploy-centos7.sh
```

#### ç¬¬3æ­¥ï¼šè¿è¡Œéƒ¨ç½²è„šæœ¬

```bash
./deploy-centos7.sh
```

#### ç¬¬4æ­¥ï¼šæŒ‰æç¤ºè¾“å…¥é…ç½®ä¿¡æ¯

è„šæœ¬ä¼šè¯¢é—®ä»¥ä¸‹ä¿¡æ¯ï¼ˆå¯ç›´æ¥å›è½¦ä½¿ç”¨é»˜è®¤å€¼ï¼‰ï¼š

```
è¯·è¾“å…¥MySQL rootå¯†ç  (é»˜è®¤: Hailong@2025): [ç›´æ¥å›è½¦æˆ–è¾“å…¥è‡ªå®šä¹‰å¯†ç ]
è¯·è¾“å…¥MySQLåº”ç”¨å¯†ç  (é»˜è®¤: HailongApp@2025): [ç›´æ¥å›è½¦æˆ–è¾“å…¥è‡ªå®šä¹‰å¯†ç ]
è¯·è¾“å…¥JWTå¯†é’¥ (è‡³å°‘32å­—ç¬¦ï¼Œé»˜è®¤è‡ªåŠ¨ç”Ÿæˆ): [ç›´æ¥å›è½¦]
é¡¹ç›®æ–‡ä»¶è·¯å¾„ (é»˜è®¤: /opt/hailong/project): [ç›´æ¥å›è½¦æˆ–è¾“å…¥å®é™…è·¯å¾„]
ç¡®è®¤å¼€å§‹éƒ¨ç½²? (y/n): y
```

#### ç¬¬5æ­¥ï¼šç­‰å¾…éƒ¨ç½²å®Œæˆ

éƒ¨ç½²è¿‡ç¨‹å¤§çº¦éœ€è¦ **15-30åˆ†é’Ÿ**ï¼Œå–å†³äºç½‘ç»œé€Ÿåº¦ã€‚

è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆï¼š
- âœ… ç³»ç»Ÿæ›´æ–°
- âœ… å®‰è£….NET 7.0è¿è¡Œæ—¶
- âœ… å®‰è£…MySQL 8.0
- âœ… å®‰è£…Nginx
- âœ… å®‰è£…Node.js
- âœ… åˆ›å»ºæ•°æ®åº“
- âœ… éƒ¨ç½²åç«¯API
- âœ… æ„å»ºå¹¶éƒ¨ç½²å‰ç«¯
- âœ… é…ç½®Nginx
- âœ… é…ç½®é˜²ç«å¢™

#### ç¬¬6æ­¥ï¼šæŸ¥çœ‹éƒ¨ç½²ä¿¡æ¯

éƒ¨ç½²å®Œæˆåï¼Œå±å¹•ä¼šæ˜¾ç¤ºè®¿é—®åœ°å€å’Œç™»å½•ä¿¡æ¯ã€‚

éƒ¨ç½²ä¿¡æ¯ä¹Ÿä¿å­˜åœ¨ï¼š`/root/hailong-deploy-info.txt`

```bash
cat /root/hailong-deploy-info.txt
```

---

## æ‰‹åŠ¨éƒ¨ç½²ï¼ˆè¯¦ç»†æ­¥éª¤ï¼‰

å¦‚æœè‡ªåŠ¨è„šæœ¬å¤±è´¥ï¼Œæˆ–è€…ä½ æƒ³äº†è§£è¯¦ç»†è¿‡ç¨‹ï¼Œè¯·å‚è€ƒ [`CentOS7éƒ¨ç½²æŒ‡å—.md`](CentOS7éƒ¨ç½²æŒ‡å—.md)ã€‚

---

## è®¿é—®ç³»ç»Ÿ

### åœ¨Windowsä¸»æœºä¸Šè®¿é—®

å‡è®¾ä½ çš„è™šæ‹ŸæœºIPæ˜¯ `192.168.108.128`ï¼š

#### 1. å‰ç«¯é—¨æˆ·ç½‘ç«™
```
http://192.168.108.128
```
è¿™æ˜¯é¢å‘å…¬ä¼—çš„å®˜ç½‘é¦–é¡µã€‚

#### 2. åå°ç®¡ç†ç³»ç»Ÿ
```
http://192.168.108.128:8080
```

**é»˜è®¤ç™»å½•ä¿¡æ¯ï¼š**
- ç”¨æˆ·åï¼š`admin`
- å¯†ç ï¼š`admin123`

**âš ï¸ é‡è¦ï¼šé¦–æ¬¡ç™»å½•åè¯·ç«‹å³ä¿®æ”¹å¯†ç ï¼**

#### 3. APIæ¥å£ï¼ˆç”¨äºæµ‹è¯•ï¼‰
```
http://192.168.108.128:5001/api/home/statistics
```

### åœ¨å±€åŸŸç½‘å…¶ä»–è®¾å¤‡ä¸Šè®¿é—®

åªè¦åœ¨åŒä¸€å±€åŸŸç½‘å†…ï¼Œå…¶ä»–è®¾å¤‡ï¼ˆæ‰‹æœºã€å¹³æ¿ã€å…¶ä»–ç”µè„‘ï¼‰éƒ½å¯ä»¥é€šè¿‡è™šæ‹ŸæœºIPè®¿é—®ï¼š

```
http://192.168.108.128        # å‰ç«¯é—¨æˆ·
http://192.168.108.128:8080   # åå°ç®¡ç†
```

### éªŒè¯éƒ¨ç½²æ˜¯å¦æˆåŠŸ

#### 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€

```bash
# æ£€æŸ¥åç«¯API
systemctl status hailong-api

# æ£€æŸ¥Nginx
systemctl status nginx

# æ£€æŸ¥MySQL
systemctl status mysqld
```

æ‰€æœ‰æœåŠ¡éƒ½åº”è¯¥æ˜¾ç¤º `active (running)` çŠ¶æ€ã€‚

#### 2. æµ‹è¯•APIæ¥å£

åœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š
```
http://192.168.108.128:5001/api/home/statistics
```

åº”è¯¥è¿”å›JSONæ ¼å¼çš„ç»Ÿè®¡æ•°æ®ã€‚

#### 3. æµ‹è¯•å‰ç«¯é¡µé¢

è®¿é—®å‰ç«¯é—¨æˆ·å’Œåå°ç®¡ç†ï¼Œç¡®ä¿é¡µé¢æ­£å¸¸æ˜¾ç¤ºã€‚

---

## è¿ç§»åˆ°äº‘æœåŠ¡å™¨

å½“ä½ å‡†å¤‡å°†ç³»ç»Ÿè¿ç§»åˆ°æ­£å¼çš„äº‘æœåŠ¡å™¨æ—¶ï¼Œå¯ä»¥æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

### æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ç›¸åŒçš„éƒ¨ç½²è„šæœ¬ï¼ˆæ¨èï¼‰

è¿™æ˜¯æœ€ç®€å•çš„æ–¹å¼ï¼Œåœ¨äº‘æœåŠ¡å™¨ä¸Šé‡æ–°è¿è¡Œéƒ¨ç½²è„šæœ¬ã€‚

#### æ­¥éª¤ï¼š

**1. å‡†å¤‡äº‘æœåŠ¡å™¨**
- è´­ä¹°äº‘æœåŠ¡å™¨ï¼ˆé˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€åä¸ºäº‘ç­‰ï¼‰
- é€‰æ‹© CentOS 7 64ä½ç³»ç»Ÿ
- é…ç½®ï¼š2æ ¸4GBå†…å­˜èµ·æ­¥ï¼Œæ¨è4æ ¸8GB

**2. ä¸Šä¼ é¡¹ç›®æ–‡ä»¶**
```bash
# åœ¨äº‘æœåŠ¡å™¨ä¸Š
mkdir -p /opt/hailong/project

# ä½¿ç”¨scpä»æœ¬åœ°ä¸Šä¼ ï¼ˆåœ¨Windowsä¸Šæ‰§è¡Œï¼‰
scp -r C:\Users\Administrator\Desktop\Protral root@äº‘æœåŠ¡å™¨IP:/opt/hailong/project/
```

**3. è¿è¡Œéƒ¨ç½²è„šæœ¬**
```bash
# ä¸Šä¼ å¹¶è¿è¡Œè„šæœ¬
cd /root
chmod +x deploy-centos7.sh
./deploy-centos7.sh
```

**4. é…ç½®åŸŸåï¼ˆå¦‚æœæœ‰ï¼‰**
- åœ¨åŸŸåæœåŠ¡å•†å¤„æ·»åŠ Aè®°å½•ï¼ŒæŒ‡å‘äº‘æœåŠ¡å™¨IP
- ä¿®æ”¹Nginxé…ç½®ä¸­çš„ `server_name`
- ç”³è¯·SSLè¯ä¹¦ï¼Œé…ç½®HTTPS

### æ–¹æ¡ˆäºŒï¼šæ•°æ®è¿ç§»ï¼ˆä¿ç•™ç°æœ‰æ•°æ®ï¼‰

å¦‚æœä½ åœ¨è™šæ‹Ÿæœºä¸Šå·²ç»å½•å…¥äº†æ•°æ®ï¼Œéœ€è¦è¿ç§»æ•°æ®ã€‚

#### æ­¥éª¤ï¼š

**1. åœ¨è™šæ‹Ÿæœºä¸Šå¤‡ä»½æ•°æ®åº“**
```bash
# å¯¼å‡ºæ•°æ®åº“
mysqldump -u root -p hailong_consulting > /root/hailong_backup.sql

# å¤‡ä»½ä¸Šä¼ çš„æ–‡ä»¶
tar -czf /root/uploads_backup.tar.gz /var/www/hailong-api/wwwroot/uploads/
```

**2. ä¸‹è½½å¤‡ä»½æ–‡ä»¶åˆ°Windows**

ä½¿ç”¨WinSCPä¸‹è½½ï¼š
- `/root/hailong_backup.sql`
- `/root/uploads_backup.tar.gz`

**3. åœ¨äº‘æœåŠ¡å™¨ä¸Šéƒ¨ç½²ç³»ç»Ÿ**

æŒ‰æ–¹æ¡ˆä¸€çš„æ­¥éª¤1-3å®ŒæˆåŸºç¡€éƒ¨ç½²

**4. æ¢å¤æ•°æ®**
```bash
# ä¸Šä¼ å¤‡ä»½æ–‡ä»¶åˆ°äº‘æœåŠ¡å™¨
# ä½¿ç”¨WinSCPä¸Šä¼ åˆ° /root/

# æ¢å¤æ•°æ®åº“
mysql -u root -p hailong_consulting < /root/hailong_backup.sql

# æ¢å¤ä¸Šä¼ æ–‡ä»¶
cd /var/www/hailong-api/wwwroot/
tar -xzf /root/uploads_backup.tar.gz --strip-components=5

# é‡å¯æœåŠ¡
systemctl restart hailong-api
```

### æ–¹æ¡ˆä¸‰ï¼šDockerå®¹å™¨åŒ–éƒ¨ç½²ï¼ˆé«˜çº§ï¼‰

å¦‚æœä½ ç†Ÿæ‚‰Dockerï¼Œå¯ä»¥ä½¿ç”¨å®¹å™¨åŒ–éƒ¨ç½²ï¼Œæ›´å®¹æ˜“è¿ç§»ã€‚

å‚è€ƒé¡¹ç›®ä¸­çš„ [`Dockerå¿«é€Ÿéƒ¨ç½²æŒ‡å—.md`](Dockerå¿«é€Ÿéƒ¨ç½²æŒ‡å—.md)

### äº‘æœåŠ¡å™¨é¢å¤–é…ç½®

#### 1. é…ç½®å®‰å…¨ç»„/é˜²ç«å¢™

åœ¨äº‘æœåŠ¡å•†æ§åˆ¶å°å¼€æ”¾ç«¯å£ï¼š
- 80 (HTTP)
- 443 (HTTPSï¼Œå¦‚æœé…ç½®SSL)
- 8080 (åå°ç®¡ç†)
- 5001 (API)
- 22 (SSH)

#### 2. é…ç½®åŸŸåï¼ˆå¯é€‰ï¼‰

å¦‚æœæœ‰åŸŸåï¼š

```bash
# ä¿®æ”¹Nginxé…ç½®
vim /etc/nginx/conf.d/hailong-protral.conf
```

å°† `server_name _;` æ”¹ä¸º `server_name www.yourdomain.com;`

```bash
# é‡å¯Nginx
systemctl restart nginx
```

#### 3. é…ç½®SSLè¯ä¹¦ï¼ˆæ¨èï¼‰

ä½¿ç”¨Let's Encryptå…è´¹è¯ä¹¦ï¼š

```bash
# å®‰è£…certbot
yum install -y certbot python2-certbot-nginx

# ç”³è¯·è¯ä¹¦
certbot --nginx -d www.yourdomain.com -d yourdomain.com

# è‡ªåŠ¨ç»­æœŸ
echo "0 0,12 * * * root python -c 'import random; import time; time.sleep(random.random() * 3600)' && certbot renew -q" | sudo tee -a /etc/crontab > /dev/null
```

### è¿ç§»ä¼˜åŠ¿

âœ… **å¿«é€Ÿè¿ç§»**ï¼šä½¿ç”¨ç›¸åŒçš„è„šæœ¬ï¼Œ10-20åˆ†é’Ÿå®Œæˆéƒ¨ç½²  
âœ… **æ•°æ®ä¿ç•™**ï¼šå¯ä»¥å®Œæ•´è¿ç§»æ‰€æœ‰æ•°æ®  
âœ… **é…ç½®ä¸€è‡´**ï¼šç¯å¢ƒé…ç½®å®Œå…¨ç›¸åŒï¼Œé¿å…å…¼å®¹æ€§é—®é¢˜  
âœ… **æ˜“äºç»´æŠ¤**ï¼šç»Ÿä¸€çš„éƒ¨ç½²æ–¹å¼ï¼Œä¾¿äºåç»­ç»´æŠ¤  

---

## å¸¸è§é—®é¢˜

### 1. æ— æ³•è®¿é—®ç½‘ç«™

**é—®é¢˜**ï¼šåœ¨æµè§ˆå™¨ä¸­æ— æ³•æ‰“å¼€ç½‘ç«™

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# æ£€æŸ¥é˜²ç«å¢™
firewall-cmd --list-ports

# å¦‚æœç«¯å£æœªå¼€æ”¾ï¼Œæ‰§è¡Œï¼š
firewall-cmd --permanent --add-port=80/tcp
firewall-cmd --permanent --add-port=8080/tcp
firewall-cmd --permanent --add-port=5001/tcp
firewall-cmd --reload

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
systemctl status nginx
systemctl status hailong-api
```

### 2. åç«¯APIæ— æ³•å¯åŠ¨

**é—®é¢˜**ï¼š`systemctl status hailong-api` æ˜¾ç¤ºå¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
journalctl -u hailong-api -n 100

# å¸¸è§åŸå› ï¼š
# - æ•°æ®åº“è¿æ¥å¤±è´¥ï¼šæ£€æŸ¥MySQLæ˜¯å¦è¿è¡Œ
systemctl status mysqld

# - ç«¯å£è¢«å ç”¨ï¼šæ£€æŸ¥5000ç«¯å£
netstat -tlnp | grep :5000

# - é…ç½®æ–‡ä»¶é”™è¯¯ï¼šæ£€æŸ¥é…ç½®
cat /var/www/hailong-api/appsettings.json
```

### 3. å‰ç«¯é¡µé¢ç©ºç™½

**é—®é¢˜**ï¼šæ‰“å¼€ç½‘ç«™åé¡µé¢ç©ºç™½

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la /var/www/hailong-admin/
ls -la /var/www/hailong-protral/

# æ£€æŸ¥Nginxé…ç½®
nginx -t

# æŸ¥çœ‹Nginxé”™è¯¯æ—¥å¿—
tail -f /var/log/nginx/error.log

# æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰æ˜¯å¦æœ‰é”™è¯¯
```

### 4. æ•°æ®åº“è¿æ¥å¤±è´¥

**é—®é¢˜**ï¼šAPIæ—¥å¿—æ˜¾ç¤ºæ•°æ®åº“è¿æ¥é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# æµ‹è¯•æ•°æ®åº“è¿æ¥
mysql -u hailong_app -p hailong_consulting

# å¦‚æœæ— æ³•è¿æ¥ï¼Œæ£€æŸ¥ï¼š
# 1. MySQLæ˜¯å¦è¿è¡Œ
systemctl status mysqld

# 2. ç”¨æˆ·æƒé™æ˜¯å¦æ­£ç¡®
mysql -u root -p
SHOW GRANTS FOR 'hailong_app'@'localhost';

# 3. æ£€æŸ¥é…ç½®æ–‡ä»¶ä¸­çš„å¯†ç 
cat /var/www/hailong-api/appsettings.json
```

### 5. npm install å¤±è´¥

**é—®é¢˜**ï¼šæ„å»ºå‰ç«¯æ—¶npm installæŠ¥é”™

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# ä½¿ç”¨å›½å†…é•œåƒ
npm config set registry https://registry.npmmirror.com

# æ¸…é™¤ç¼“å­˜é‡è¯•
npm cache clean --force
npm install
```

### 6. è™šæ‹Ÿæœºé‡å¯åæ— æ³•è®¿é—®

**é—®é¢˜**ï¼šè™šæ‹Ÿæœºé‡å¯åIPåœ°å€å˜äº†

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# æŸ¥çœ‹æ–°çš„IPåœ°å€
ip addr show

# æ–¹æ³•1ï¼šä½¿ç”¨æ–°IPè®¿é—®

# æ–¹æ³•2ï¼šé…ç½®é™æ€IPï¼ˆæ¨èï¼‰
vim /etc/sysconfig/network-scripts/ifcfg-ens33

# ä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼š
# BOOTPROTO=static
# IPADDR=192.168.108.128
# NETMASK=255.255.255.0
# GATEWAY=192.168.1.1
# DNS1=8.8.8.8

# é‡å¯ç½‘ç»œ
systemctl restart network
```

### 7. æ–‡ä»¶ä¸Šä¼ å¤±è´¥

**é—®é¢˜**ï¼šåœ¨åå°ç®¡ç†ä¸Šä¼ æ–‡ä»¶å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# æ£€æŸ¥ä¸Šä¼ ç›®å½•æƒé™
ls -la /var/www/hailong-api/wwwroot/uploads/

# è®¾ç½®æ­£ç¡®çš„æƒé™
chmod -R 755 /var/www/hailong-api/wwwroot/uploads/
chown -R root:root /var/www/hailong-api/wwwroot/uploads/

# æ£€æŸ¥Nginxæ–‡ä»¶å¤§å°é™åˆ¶
vim /etc/nginx/conf.d/hailong-api.conf
# ç¡®ä¿æœ‰ï¼šclient_max_body_size 100M;

# é‡å¯Nginx
systemctl restart nginx
```

---

## ğŸ“ é‡è¦æ–‡ä»¶ä½ç½®

```
/var/www/hailong-api/              # åç«¯API
/var/www/hailong-admin/            # åå°ç®¡ç†
/var/www/hailong-protral/          # å‰ç«¯é—¨æˆ·
/etc/nginx/conf.d/                 # Nginxé…ç½®
/root/hailong-deploy-info.txt      # éƒ¨ç½²ä¿¡æ¯
/var/log/nginx/                    # Nginxæ—¥å¿—
```

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

```bash
# é‡å¯æ‰€æœ‰æœåŠ¡
systemctl restart hailong-api
systemctl restart nginx
systemctl restart mysqld

# æŸ¥çœ‹æ—¥å¿—
journalctl -u hailong-api -f          # APIæ—¥å¿—
tail -f /var/log/nginx/error.log      # Nginxé”™è¯¯æ—¥å¿—
tail -f /var/log/nginx/access.log     # Nginxè®¿é—®æ—¥å¿—

# æŸ¥çœ‹ç«¯å£å ç”¨
netstat -tlnp | grep :5000
netstat -tlnp | grep :8080
netstat -tlnp | grep :80

# æŸ¥çœ‹ç³»ç»Ÿèµ„æº
top                    # å®æ—¶èµ„æºç›‘æ§
df -h                  # ç£ç›˜ä½¿ç”¨
free -h                # å†…å­˜ä½¿ç”¨
```

## ğŸ” å®‰å…¨å»ºè®®

1. **ç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç **
   - ä¿®æ”¹adminè´¦æˆ·å¯†ç 
   - ä¿®æ”¹MySQL rootå¯†ç 

2. **å®šæœŸå¤‡ä»½æ•°æ®åº“**
   ```bash
   # åˆ›å»ºå¤‡ä»½è„šæœ¬
   vim /root/backup.sh
   
   # æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š
   #!/bin/bash
   DATE=$(date +%Y%m%d_%H%M%S)
   mysqldump -u root -på¯†ç  hailong_consulting > /root/backups/db_$DATE.sql
   
   # è®¾ç½®å®šæ—¶ä»»åŠ¡ï¼ˆæ¯å¤©å‡Œæ™¨2ç‚¹å¤‡ä»½ï¼‰
   crontab -e
   0 2 * * * /root/backup.sh
   ```

3. **æ›´æ–°ç³»ç»Ÿå®‰å…¨è¡¥ä¸**
   ```bash
   yum update -y
   ```

4. **é™åˆ¶SSHè®¿é—®**
   ```bash
   # ä¿®æ”¹SSHç«¯å£
   vim /etc/ssh/sshd_config
   # Port 22 æ”¹ä¸º Port 2222
   
   # ç¦ç”¨rootç›´æ¥ç™»å½•ï¼ˆå¯é€‰ï¼‰
   # PermitRootLogin no
   
   systemctl restart sshd
   ```

---

## ğŸ“ è·å–å¸®åŠ©

1. **æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£**: [`CentOS7éƒ¨ç½²æŒ‡å—.md`](CentOS7éƒ¨ç½²æŒ‡å—.md)
2. **æŸ¥çœ‹æ•…éšœæ’æŸ¥**: [`TROUBLESHOOTING.md`](TROUBLESHOOTING.md)
3. **æŸ¥çœ‹éƒ¨ç½²ä¿¡æ¯**: `cat /root/hailong-deploy-info.txt`

---

**ç¥æ‚¨éƒ¨ç½²é¡ºåˆ©ï¼** ğŸ‰

å¦‚æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒè¯¦ç»†æ–‡æ¡£æˆ–è”ç³»æŠ€æœ¯æ”¯æŒã€‚